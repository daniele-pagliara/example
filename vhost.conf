<VirtualHost *:80>
    DocumentRoot /var/www/html/public
    
    # Correzione del socket: usiamo unix:/ invece di unix:///
    <FilesMatch \.php$>
        SetHandler "proxy:unix:/run/php-fpm/www.sock|fcgi://localhost"
    </FilesMatch>
    
    <Directory /var/www/html/public>
        Options +Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Gestione standard Laravel
        <IfModule mod_rewrite.c>
            RewriteEngine On
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteCond %{REQUEST_FILENAME} !-d
            RewriteRule ^ index.php [QSA,L]
        </IfModule>
    </Directory>

    # Log per il debug (fondamentali se non funziona)
    ErrorLog /var/log/httpd/error_log
    CustomLog /var/log/httpd/access_log combined
</VirtualHost>